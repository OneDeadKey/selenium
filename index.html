<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8">
    <title>Selenium</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="keeb.css">
    <script src="select.js" defer></script>
    <svg>
      <defs>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_backspace" d="M22,19l10,10 M22,29l10-10 M6,24l10,13h26v-26h-26z"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_delete"    d="M16,19l10,10 M16,29l10-10 M42,24l-10,13h-26v-26h26z"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_return"    d="M42,13V27H6 m8-8l-8,8l8,8"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_space"     d="M42,24V32H6V24"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_escape"    d="M24,24l-18-18 m0,10v-10h10 M24,6A18,18,0,1,1,6,24"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_tab"       d="M6,24h27 m-6-8l8,8l-8,8 M42,12V36"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_btab"      d="M42,24h-27 m6-8l-8,8l8,8 M6,12V36"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_shift"     d="M23,7l14,20h-7v16h-14v-16h-7l14,-20"/>
        <path class="symbol" transform="scale(0.4) translate(-24, -30)" id="glyph_caps"      d="M24,7l14,20h-7v6h-14v-6h-7l14,-20 M31,38v5h-14v-5z"/>
      </defs>
    </svg>
    <script src="keeb.js"></script>
  </head>
  <body>
    <header>
      <h1>Selenium</h1>
      <p>A configurable <a href="https://github.com/OneDeadKey/arsenik">Arsenik</a>
        variant for split keyboards.</p>
      <form>
        <div>
          <span>
            <input type="checkbox" name="vim" id="option-vim" value="vim">
            <label for="option-vim">Vim variant</label>
          </span>
          <span>
            <select name="layout">
              <option>QWERTY</option>
              <option>Colemak</option>
              <option>Sturdy</option>
              <option>Ergol</option>
            </select>
            <select name="geometry">
              <option value="ortho" selected>Ortho</option>
              <option value="flex">Quacken</option>
            </select>
          </span>
        </div>
        <object type="image/svg+xml" data="keeb.svg" class="main"></object>
        <div style="display: none;">
          <p>
            <input type="radio" name="mode" id="mode-ez" value="ez">
            <label for="mode-ez"><strong>EZ</strong>: no hold-taps</label>
            <br>
            <input type="radio" name="mode" id="mode-tt" value="tt">
            <label for="mode-tt"><strong>TT</strong>: thumb-taps</label>
            <br>
            <input type="radio" name="mode" id="mode-hrm" value="hrm" checked>
            <label for="mode-hrm"><strong>HRM</strong>: homerow-mods</label>
            <br>
            <input type="radio" name="mode" id="mode-2tk" value="2tk">
            <label for="mode-2tk"><strong>2TK</strong>: two thumb keys</label>
          </p>
        </div>
        <table id="menu">
          <tr id="menu-ez">
            <th> EZ </th>
            <td> <strong>No hold-taps</strong>
              <br> A beginner-friendly keymap for 42-key keebs. 
              <br> Modifiers, <kbd>Backspace</kbd> and <kbd>Return</kbd> in pinky extensions.
            </td>
          </tr>
          <tr id="menu-tt">
            <th> TT </th>
            <td> <strong>Thumb-taps</strong>: learning how to thumb-shift
              <br>`Nav` layer with a long press on the <kbd>Space</kbd> key.
              <br><kbd>Backspace</kbd> and <kbd>Return</kbd> with a quick tap on thumb keys.
            </td>
          </tr>
          <tr id="menu-hrm" class="selected">
            <th> HRM </th>
            <td> <strong>Homerow-mods</strong>: the sane default
              <br>Symmetrical modifiers on the homerow.
              <br>Symmetrical layer-shifts under the thumbs.
            </td>
          </tr>
          <tr id="menu-2tk">
            <th> 2TK </th>
            <td> <strong>Two thumb keys</strong>
              <br>Because two good keys can be better than three. </td>
          </tr>
        </table>
      </form>
    </header>

    <main>
      <h2 id="hold-taps">Hold-Taps That Just Work</h2>
      <p>Compact keyboards rely on affecting several actions to some keys based on how long they 
        are tapped or held (hold-taps behaviour). Bad timing configurations can however make hold-taps unreliable and very 
        frustrating to use. We believe Selenium provides sane defaults to avoid the problem. </p>

      <h3 id="timing-is-key">Timing is Key</h3>
      <p>The common approach for compact keyboard keymaps is to use a single configuration (and timing) 
        for all hold-taps, which is often a compromise between “tap-preferred” and “hold-preferred” (like QMK’s
        “permissive hold”), and then rely on mitigating measures and fine timing adjustments to limit
        the number of typos.</p>
      <p>In our experience, this doesn’t work reliably for most users and never will, because
        <strong>homerow-mods and thumb modifiers have two mutually excusive goals</strong>.
        Instead, Selenium uses three distinct kinds of hold-tap behaviours that defines which 
        action takes priority and timings:</p>
      <table>
        <tr>
          <td>
            <svg viewBox="0 0 60 57">
              <g class="key">
                <rect x="1" y="1" rx="4" ry="4" width="58" height="54.67"/>
                <rect class="holdTap borderNav tap-pref" x="1" y="28.335" rx="4" ry="4" width="29" height="27.335"/>
                <text class="level1  borderNav pc" x="15" y="45.336">nav</text>
                <use  class="level2" href="#glyph_space" x="15" y="18.1344"/>
              </g>
            </svg>
          </td>
          <td>
            <strong>Tap-Preferred</strong><br>
            Behaves as a letter key by default, becomes a modifier / layer-shift when pressed longer
            than 300ms.<br>
            Perfect for <kbd>Space</kbd> and homerow-mods.
          </td>
        </tr>
        <tr>
          <td>
            <svg viewBox="0 0 60 57">
              <g class="key">
                <rect x="1" y="1" rx="4" ry="4" width="58" height="54.67"/>
                <rect class="holdTap colorFun" x="1" y="28.335" rx="4" ry="4" width="29" height="27.335"/>
                <text class="level1  colorFun pc" x="15" y="45.336">fun</text>
                <use  class="level2" href="#glyph_return" x="15" y="18.1344"/>
              </g>
            </svg>
          </td>
          <td>
            <strong>Hold-Preferred</strong><br>
            Behaves as a modifier / layer-shift by default, becomes an input when pressed and
            released in less than 150ms.<br>
            Perfect for adding actions like <kbd>Enter</kbd>, <kbd>Backspace</kbd>, <kbd>Tab</kbd>,
            <kbd>Esc</kbd> to any thumb modifier / layer-shift.
          </td>
        </tr>
        <tr>
          <td>
            <svg viewBox="0 0 60 57">
              <rect x="1" y="1" rx="4" ry="4" width="58" height="54.67"/>
              <rect class="colorSym sticky" y="1" rx="4" ry="4" width="29" height="54.67"/>
              <text class="colorSym sticky pc" x="-28.335" y="20">sym</text>
            </svg>
          </td>
          <td>
            <strong>Sticky</strong><br>
            Behaves as a one-time-shift when tapped, and as a modifier / layer-shift when held.<br>
            Perfect for <kbd>Shift</kbd> and <kbd>Symbols</kbd>.
          </td>
        </tr>
      </table>
      <p>With this approach, you’ll never have to think of it: as long as your keymap respects the
        proper behavior/key associations, it just works. No unwanted shortcuts while typing text, no
        accidental <kbd>Return</kbd> while chatting.</p>

      <h3 id="thumb-shifting">Thumb-Shifting</h3>
      <p>An opiniated choice with Selenium is that the <kbd>Shift</kbd> and <kbd>Symbols</kbd>
        keys belong to the thumbs, <em>not</em> to the homerow:</p>
      <ul>
        <li>to work seamlessly these keys must have “hold-preferred” priority, which is not suitable for homerow-mods;</li>
        <li>this setting makes it <em></em>much easier<em></em> to chain several uppercase letters or symbols.</li>
        
      </ul>
      <p>Having <kbd>Shift</kbd> as a homerow-mod is a very common reason why HRMs as a whole can be
        so difficult to tune right: capitalizing a word while typing text requires <kbd>Shift</kbd>
        to have an immediate action, which is exactly what you do <em>NOT</em> want for keyboard
        shortcuts. The problem can be partially mitigated with complex settings and practice, but it
        always ends up showing up at higher typing speeds.</p>
      <p>By using a thumb key with hold-preferred priority for <kbd>Shift</kbd>, we can use a very
        long tapping-term on homerow-mods (300 ms by default), and ensure they’re never misfired. </p>
      <p> It might take a bit to get used to <kbd>Shift</kbd> under the left thumb, but it’s totally
        worth it — even without these timing considerations. Probably the biggest comfort improvement
        you can expect on a keyboard. </p>

      <h3 id="one-time-shift">One-Time-Shift</h3>
      <p>In its recommended flavor, Selenium sets sticky <kbd>Shift</kbd> and <kbd>Symbols</kbd>
        keys under the thumbs: modifiers when held, dead keys when tapped. The trick is, <em>these
        keys behave as one-time-shift by default</em>, which gives additional safety to capitalize
        only the first letter of a word. The faster you type, the more you’ll see the benefits of
        such details.</p>
      <p> Even without speed-typing, using <kbd>Shift</kbd> and <kbd>Symbols</kbd> as dead keys is
        an incredible improvement over regular modifiers. This won’t get in the way if you don’t
        use it, but you definitely should try <em>rolling</em> these thumb keys rather than
        <em>chording</em> them: that’s the kind of comfort improvement you don’t want to miss. </p>
      <p>In our opinion, these sticky keys are the main reason why you should have a keyboard with
        three good keys per thumb. Otherwise, 34 keys would be just fine.</p>

      <h2 id="flavors">From 42 to 34 Keys (and beyond)</h2>
      <p>Selenium is available in 4 different <em>flavors</em>: pick the HRM flavor right away,
        or start with EZ or TT to ease the learning process if you’re unsure.</p>

      <h3 id="flavor-ez">EZ: No Hold-Taps</h3>
      <svg viewBox="0 10 410 57">
        <g class="left" id="ez-left">
          <g class="tucked specialKey">
            <rect class="colorMod" x="1" y="1" width="58" height="54.67"/>
            <text class="colorMod level0">alt</text>
            <text class="layerSym shortcut">num</text>
          </g>
          <g class="comfy specialKey">
            <rect class="colorMod" x="1" y="1" width="58" height="54.67"/>
            <text class="colorMod level0">ctrl</text>
            <use  class="layerSym" href="#glyph_space"/>
          </g>
          <g class="reachy specialKey">
            <rect class="colorMod" x="1" y="1" width="58" height="54.67"/>
            <text class="colorMod level0">os</text>
            <text class="layerNav pc">fun</text>
            <use  class="layerSym" href="#glyph_return"/>
          </g>
        </g>
        <g class="right" id="ez-right">
          <g class="reachy specialKey">
            <rect class="colorNav" x="1" y="1" width="58" height="54.67"/>
            <text class="colorNav level0">nav</text>
          </g>
          <g class="comfy specialKey">
            <rect x="1" y="1" width="58" height="54.67"/>
            <use  class="level0" href="#glyph_space"/>
          </g>
          <g class="tucked specialKey">
            <rect class="colorSym" x="1" y="1" width="58" height="54.67"/>
            <text class="level0 colorSym">sym</text>
            <text class="layerNav shortcut">altgr</text>
          </g>
        </g>
      </svg>
      <p> The most direct way to get started with compact keyboards (42+ keys): </p>
      <ul>
        <li> non-<kbd>Shift</kbd> modifiers on the left; </li>
        <li> <kbd>Space</kbd> and layer-shifts on the right; </li>
        <li> <kbd>Nav</kbd>+<kbd>OS</kbd> gets to the <kbd>Fun/Media</kbd> layer. </li>
      </ul>
      <p> Special keys like <kbd>Shift</kbd>, <kbd>Enter</kbd>, <kbd>Backspace</kbd> or
        <kbd>Tab</kbd> remain on lateral columns, like on standard ANSI/ISO keyboards. </p>

      <h3 id="flavor-tt">TT: Thumb-Taps</h3>
      <svg viewBox="0 10 410 57">
        <g class="left">
          <g id="tt-left-tucked" class="tucked">
            <rect/>
            <rect class="colorMod sticky"/>
            <text class="colorMod sticky pc">shift</text>
            <use  class="layerVim" href="#glyph_caps"/>
            <text class="layerSym shortcut">num</text>
          </g>
          <g id="tt-left-comfy"  class="comfy key">
            <rect/>
            <rect class="holdTap colorMod"/>
            <text class="level1  colorMod pc">ctrl</text>
            <use  class="level2"   href="#glyph_backspace"/>
            <use  class="layerNav" href="#glyph_delete"/>
            <use  class="layerSym" href="#glyph_space"/>
          </g>
          <g id="tt-left-reachy" class="reachy key">
            <rect/>
            <rect class="holdTap colorMod"/>
            <text class="level1  colorMod pc">os</text>
            <use  class="level2"   href="#glyph_tab"/>
            <use  class="layerNav" href="#glyph_btab"/>
            <use  class="layerSym" href="#glyph_return"/>
          </g>
        </g>
        <g class="right">
          <g id="tt-right-reachy" class="reachy key">
            <rect/>
            <rect class="holdTap colorMod"/>
            <text class="level1  colorMod pc">alt</text>
            <use  class="level2"   href="#glyph_return"/>
          </g>
          <g id="tt-right-comfy"  class="comfy key">
            <rect/>
            <rect class="holdTap borderNav tap-pref"/>
            <text class="level1  borderNav pc">nav</text>
            <use  class="level2" href="#glyph_space"/>
            <text class="layerNav pc">fun</text>
          </g>
          <g id="tt-right-tucked" class="tucked">
            <rect/>
            <rect class="colorSym sticky"/>
            <text class="colorSym sticky pc">sym</text>
            <text class="layerNav shortcut">altgr</text>
          </g>
        </g>
      </svg>
      <p> Learning hold-taps and thumb-shifting is the next step:</p>
      <ul>
        <li> <kbd>Nav/Num</kbd> is activated with a long press on <kbd>Space</kbd>; </li>
        <li> modifiers act as special keys when tapped:
          <kbd>Backspace</kbd>, <kbd>Tab</kbd>, <kbd>Enter</kbd>; </li>
        <li> <kbd>Shift</kbd> and <kbd>Sym</kbd> are sticky: modifiers when held,
          dead keys when tapped. </li>
      </ul>
      <p> This flavor tries to be as symmetrical as possible, with keys mirrored by pairs:
        <kbd>Shift</kbd>/<kbd>Sym</kbd>, <kbd>Backspace</kbd>/<kbd>Space</kbd>,
        <kbd>Tab</kbd>/<kbd>Enter</kbd>.
      </p>

      <h3 id="flavor-hrm">HRM: Home-Row Mods</h3>
      <svg viewBox="0 10 410 57">
        <g class="left">
          <use href="#tt-left-tucked" class="tucked"/>
          <g id="hrm-left-comfy"  class="comfy key">
            <rect/>
            <rect class="holdTap colorNav"/>
            <text class="level1  colorNav pc">nav</text>
            <use  class="level2"   href="#glyph_backspace"/>
            <use  class="layerNav" href="#glyph_delete"/>
            <use  class="layerSym" href="#glyph_space"/>
          </g>
          <g id="hrm-left-reachy" class="reachy key">
            <rect/>
            <rect class="holdTap colorFun"/>
            <text class="level1  colorFun pc">fun</text>
            <use  class="level2"   href="#glyph_tab"/>
            <use  class="layerNav" href="#glyph_btab"/>
            <use  class="layerSym" href="#glyph_return"/>
          </g>
        </g>
        <g class="right">
          <g class="reachy key">
            <rect/>
            <rect class="holdTap colorFun"/>
            <text class="level1  colorFun pc">fun</text>
            <use  class="level2"   href="#glyph_return"/>
          </g>
          <use href="#tt-right-comfy"  class="comfy key"/>
          <use href="#tt-right-tucked" class="tucked"/>
        </g>
      </svg>
      <p> This is the default and recommended flavor. It pushes the symmetry even further: </p>
      <ul>
        <li> symmetrical modifiers on the home row (long press), making all keyboard shortcuts
          trivial; </li>
        <li> symmetrical layer-shifts under the thumbs, to handle the half-layers in
          <kbd>Nav/Num</kbd> and <kbd>Fun/Media</kbd>. </li>
      </ul>
      <p> <kbd>Shift</kbd> and <kbd>Sym</kbd> are mirrored, not doubled: </p>
      <ul>
        <li> unlike <kbd>Nav</kbd> and <kbd>Fun</kbd>, these keys can be held to type several
          characters with both hands, like <code>FULLCAPS</code> words or symbol sequences like
          <code>:(){ :|:& };:</code> (don’t); </li>
        <li> when used for a single character, they’re used as dead keys.</li>
      </ul>
      <p> This flavor quickly feels like the most natural way to use a keyboard. </p>

      <h3 id="flavor-2tk">2TK: Two Thumb Keys</h3>
      <svg viewBox="0 10 410 57">
        <g class="left">
          <g class="comfy key">
            <rect/>
            <rect class="holdTap colorMod"/>
            <text class="level1 colorMod pc">shift</text>
            <use  class="level2"   href="#glyph_tab"/>
            <use  class="layerNav" href="#glyph_btab"/>
            <use  class="layerSym" href="#glyph_caps"/>
          </g>
          <use href="#hrm-left-comfy" class="reachy key"/>
        </g>
        <g class="right">
          <use href="#tt-right-comfy" class="reachy key"/>
          <g id="dtk-right-tucked" class="comfy key">
            <rect/>
            <rect class="holdTap colorSym"/>
            <text class="level1  colorSym pc">sym</text>
            <use  class="level2" href="#glyph_return"/>
            <text class="layerNav shortcut">altgr</text>
          </g>
        </g>
      </svg>
      <p> Keyboards with three good keys per thumb are rare, but there are a lot of good 34-key
        keebs out there, and Selenium has a flavor for them — which is just a simplified version of
        the default HRM flavor: </p>
      <ul>
        <li> <kbd>Fun/Media</kbd> is activated by holding both <kbd>Nav/Num</kbd> keys; </li>
        <li> <kbd>Shift</kbd> and <kbd>Sym</kbd> become hold-preferred. </li>
      </ul>
      <p> FTR: Selenium started as a 34-key configuration, and the name is a reference to the 34th
        element of the periodic table. This flavor used to be the default one — and would still be
        if sticky keys weren’t such a banger. ;-) </p>

      <h2 id="layers">Layers</h2>

      <h3>Symbols</h3>
      <object type="image/svg+xml" data="keeb.svg" class="sym"></object>
      TODO
      <!-- <p>The Symbol layer has been fine-tuned to chain common programming symbols.</p> -->
      <!-- <p>It’s also been desinged with Vim in mind, to make advanced navigation tricks more -->
      <!--   comfortable.</p> -->

      <h3>Nav/Num</h3>
      <object type="image/svg+xml" data="keeb.svg" class="nav"></object>
      TODO

      <h3>Fun/Media</h3>
      <object type="image/svg+xml" data="keeb.svg" class="fun"></object>
      TODO

      <h2 id="options">Options</h2>

      <h3>Vim Variant</h3>
      <object type="image/svg+xml" data="keeb.svg" class="vim"></object>
      TODO

      <h3><kbd>Space</kbd>/<kbd>Backspace</kbd> Swap</h3>
      TODO

      <h3><kbd>Shift</kbd> as Pinky HRM</h3>
      TODO

      <h2 id="implementations">Implementations</h2>
      <p>The reference implementation is the <a
        href="https://github.com/Nuclear-Squid/zmk-keyboard-quacken/">ZMK firmware for the
        Quacken</a>, a highly configurable keyboard (30-42 keys). </p>
    </main>
  </body>
</html>
